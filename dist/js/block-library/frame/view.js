window.addEventListener("DOMContentLoaded",(()=>{const e=(e,t,n=!0)=>{const s=new CustomEvent("frame-change-step",{bubbles:!0,detail:{getIndex:()=>e,scroll:n}});t.dispatchEvent(s)};document.querySelectorAll(".wp-block-frames-container").forEach((t=>(t=>{const n=t.querySelector(".wp-block-frames-navigation"),s=[...n.querySelectorAll(".wp-block-frames-navigation-dot")],r=t.querySelector(".wp-block-frames-frame"),o=[...r.querySelectorAll(':scope > [class^="wp-block-"]')],a="autoplay"in t.dataset&&"true"===t.dataset.autoplay;console.log(o,a);let l=null;const i=()=>{clearInterval(l),l=null},c=o[0].cloneNode(!0),d=s[0].cloneNode(!0);d.dataset.index=String(o.length),d.textContent=String(o.length),r.appendChild(c),o.push(c),n.appendChild(d),s.push(d);const u=()=>t.querySelector(".wp-block-frames-navigation-dot.active"),g=(t=null,n=!0)=>{const s=u();if(s){const t="index"in s.dataset?parseInt(s.dataset.index):0;e(t,s,n)}},v=(e=null)=>{const{top:t,y:n,height:s}=r.getBoundingClientRect(),{innerHeight:o}=window;t>0&&n+s<o&&(g(e),document.removeEventListener("scrollend",v))},f=()=>{l||(l=setInterval((function(){r.classList.add("user-scrolling");const e=u();if(e){const t=("index"in e.dataset?parseInt(e.dataset.index):0)+1,n=o.length>t?t:0;n||(r.style.transitionDuration="0s",r.style.transform="translateX(0px)"),p(n),document.addEventListener("scrollend",v),g()}}),3300))},m=e=>{o.forEach((e=>e.removeAttribute("aria-current"))),s.forEach((e=>e.classList.remove("active"))),s[e].classList.add("active"),o[e].setAttribute("aria-current","step"),h(e,!1)};t.addEventListener("frame-change-step",(e=>{const{getIndex:t,scroll:n}=e.detail,s=t();m(s),n&&r.classList.add("scrolling")}));const h=(e,t,n=!1)=>{t?o[e].scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"}):(r.style.transition=e?"transform 300ms linear":"none",r.style.transform=`translateX(-${o[e].offsetLeft}px)`,a&&e===o.length-1&&(i(),setTimeout((function(){f()}),300)))};r.addEventListener("scrollend",(e=>{const t=[...o].findIndex((e=>{const{left:t}=e.getBoundingClientRect();return t>0&&t<innerWidth})),n=u().dataset.index||-1;r.classList.contains("user-scrolling")||t===n||m(t),r.classList.remove("user-scrolling"),r.classList.remove("scrolling"),document.addEventListener("scrollend",v)}));const p=e=>{r.classList.add("user-scrolling"),o.forEach((e=>e.removeAttribute("aria-current"))),s.forEach((e=>e.classList.remove("active"))),s.length>e&&s[e].classList.add("active"),o[e].setAttribute("aria-current","step")};if(!s.length)return;s.forEach(((e,t)=>{e.addEventListener("click",(e=>{e.preventDefault(),i();const t="index"in e.target.dataset?parseInt(e.target.dataset.index):0;p(t),document.addEventListener("scrollend",v),g()}))})),r.addEventListener("scroll",(e=>{i();const t=e.target.scrollLeft%e.target.offsetWidth==0?0:300;clearTimeout(e.target.scrollTimeout),e.target.scrollTimeout=setTimeout((function(){r.classList.remove("user-scrolling"),r.classList.remove("scrolling")}),t)})),o.forEach(((e,t)=>e.setAttribute("data-index",t.toString()))),e(0,o[0],!1);a&&(r.style.pointerEvents="none",new IntersectionObserver((e=>{const t=e.length?e[0]:null;t&&(t.isIntersecting?f():i())}),{}).observe(t))})(t)))}));